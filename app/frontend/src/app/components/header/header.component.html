<nz-page-header class="header">
  <nz-page-header-title class="header__title clickable" [routerLink]="['/app/general']">
    <app-svg-icon class="header__app-logo" icon="rememory-logo"></app-svg-icon>
  </nz-page-header-title>
  <nz-page-header-extra *ngIf="user$ | async as user" class="header__user-info">
    <span class="header__icon clickable" nz-icon nzType="read" nzTheme="outline"></span>
    <span class="header__icon clickable" nz-icon nzType="setting" nzTheme="outline" (click)="isSettingsModalOpen$.next(true)"></span>
    <a nz-dropdown nzTrigger="click" [nzDropdownMenu]="menu" nzPlacement="bottomRight">
      <nz-avatar class="clickable" nz-page-header-avatar [nzSrc]="user.photoUrl"></nz-avatar>
    </a>
    <nz-dropdown-menu #menu="nzDropdownMenu">
      <ul nz-menu>
        <li nz-menu-item nzDanger (click)="logout()">Выйти</li>
      </ul>
    </nz-dropdown-menu>
  </nz-page-header-extra>
</nz-page-header>

<nz-modal [nzVisible]="isSettingsModalOpen$ | async"
          [nzWidth]="950"
          [nzCloseIcon]="closeIcon"
          [nzFooter]="modalFooter">
  <div class="header__settings-content-container" *nzModalContent>
    <h1 class="header__settings-modal-header">Настройки</h1>

    <div class="header__setting-modal-form" [formGroup]="settingsForm">
      <div class="header__setting-container">
        <div class="header__setting-label">Я хочу получать уведомления раз в</div>
        <nz-select class="flex-1" formControlName="periodInDays" nzSize="large">
          <nz-option *ngFor="let option of periodOptions" [nzValue]="option.value" [nzLabel]="option.label"></nz-option>
        </nz-select>
      </div>

      <h2>Где вы хотите получать напоминания о новых вопросах?</h2>

      <div class="header__setting-container">
        <div class="header__setting-label">Почта</div>
        <input class="flex-1" nz-input formControlName="email" placeholder="Введите адрес электронной почты" nzSize="large"/>
      </div>

      <div class="header__setting-container">
        <div class="header__setting-label">Telegram</div>
        <input class="flex-1" nz-input formControlName="telegramName" placeholder="Введите ник в телеграм" nzSize="large"/>
      </div>
    </div>
  </div>
</nz-modal>

<ng-template #closeIcon>
  <button nz-button nzType="text" (click)="isSettingsModalOpen$.next(false)">
    <span nz-icon nzType="close" nzTheme="outline"></span>
  </button>
</ng-template>
